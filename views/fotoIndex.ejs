<div class="row-fluid">
    <div class="box gradient">
        <div class="title">
            <h3> 
                <i class=" icon-bar-chart"></i><span>Fotos</span> 
            </h3>
        </div>
        <!-- End .title -->

        <div class="content">

            <%
                                    
            var quantidadeDeFotosPorLinha = 4
                quantidadeDeUl = 0;

            if (viewModel.length <= quantidadeDeFotosPorLinha) {
                quantidadeDeUl = 1;
            } else {
                quantidadeDeUl = Math.ceil(viewModel.length / quantidadeDeFotosPorLinha);
            }

            for (var rowIndex = 0; rowIndex < quantidadeDeUl; rowIndex++) {

            %>

            <ul class="thumbnails row-fluid">

                <%
                                    
                var quantidadeDeFoto = 0,
                    ehUltimaLinha = (rowIndex + 1) === quantidadeDeUl;

                if (ehUltimaLinha) {
                    quantidadeDeFoto = viewModel.length;
                } else {
                    quantidadeDeFoto = quantidadeDeFotosPorLinha * (rowIndex + 1);
                }

                for (var fotoIndex = rowIndex * quantidadeDeFotosPorLinha; fotoIndex < quantidadeDeFoto; fotoIndex++) {

                %>

                <li class="span3">
                    <div class="btn-group"> 
                        <a class="excluir" data-toggle="modal" href="#myModal" rel="tooltip" data-url-exclusao="/admin/video/excluir/<%= viewModel[fotoIndex].id %>" data-placement="top" data-original-title="Excluir"> 
                            <i class=" icon-trash"></i> 
                        </a> 
                    </div>
                
                    <a class="thumbnail"> 
                        <iframe width="293" height="165" src="/img/foto/musico/<%= viewModel[fotoIndex].imagemPequena %>" frameborder="0" allowfullscreen></iframe>
                    </a> 
                </li>

                <% } %> <!-- End FOR -->

            </ul>

            <% } %> <!-- End FOR -->

        </div>
    </div>
    <!-- End .box --> 
</div>
<!-- End .row-fluid --> 

<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button>
        <h3 id="myModalLabel">Confirmação</h3>
    </div>
    <div class="modal-body">
        <p>Deseja realmente excluir este item?</p>
    </div>
    <div class="modal-footer">
        <a class="btn btn-primary confirmarExclusao" href="#">Sim</a>
        <button class="btn" data-dismiss="modal" aria-hidden="true">Não</button>
    </div>
</div>

<script>
    jQuery(function () {
        $('a.excluir').on('click', function (e) {
            e.preventDefault();
            var _this = $(e.currentTarget);
            var urlExclusao = _this.data().urlExclusao;
            $('a.confirmarExclusao').attr('href', urlExclusao);
        });
    });
</script>

<% include partial/mensagem %>